### IAP存储

##### 一、IAP遇到问题

最近在写IAP保存数据，遇到过数据保存到程序存储区，导致运行异常；地址错误，数据保存不上等情况，总结经验，希望以后能避免此类问题。

IAP是通过软件实现在线电擦除和编程的方法。IAP技术是从结构上将Flash存储器分为两个存储体，当运行一个存储体的用户程序时，可对另一存储体重新编程，之后将程序从一个存储体转向另一个。

利用IAP保存数据，实际上是将数据保存到Flash。数据保存前，先对这一扇区进行擦除，然后在写入数据。Flsah是保存程序的，如果你不知道程序保存到哪个地址，千万不要盲目把数据写入一块地址。如果你将数据写入程序存放的区域，会导致单片机运行程序异常！！！可以利用软件工具先看hex文件，程序放在哪个区域，把想要保存的数据放在别的区域。当然，也可以把数据保存到Flash的最后一页，一般程序不会占用最后一页。